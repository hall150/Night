/*! super-mario-world-js 2017-02-02 */
function preload(){game.load.image("sky","assets/maps/yoshis-island-1/background.png"),game.load.image("ground","assets/tutorial/platform.png"),game.load.image("star","assets/tutorial/star.png"),game.load.atlasJSONArray("mario","assets/sprites/spritesheets/mario.png","assets/sprites/spritesheets/mario.json"),game.load.atlasJSONArray("items","assets/items/items.png","assets/items/items.json"),game.load.atlasJSONArray("hud","assets/hud/hud.png","assets/hud/hud.json"),game.load.atlasJSONArray("groundTiles","assets/maps/tiles/ground.png","assets/maps/tiles/ground.json"),game.load.atlasJSONArray("background-objects","assets/backgrounds/background-objects.png","assets/backgrounds/background-objects.json"),game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,game.scale.setUserScale(2,2),game.renderer.renderSession.roundPixels=!0,Phaser.Canvas.setImageRenderingCrisp(this.game.canvas),game.load.audio("Overworld Theme","assets/sound/music/2-53 Overworld Theme (SMW).mp3"),game.load.audio("Jump Wav","assets/sound/effects/jump.wav"),game.load.audio("Coin Wav","assets/sound/effects/coin.wav"),game.load.audio("Spin Wav","assets/sound/effects/spin.wav")}function create(){game.physics.startSystem(Phaser.Physics.ARCADE),game.add.sprite(0,-192,"sky"),platforms=game.add.group(),platforms.enableBody=!0;var a=platforms.create(0,game.world.height-31,"ground");a.scale.setTo(2,2),a.body.immovable=!0,groundTilesGroup=game.add.group();for(var b=0;b<SNES_WIDTH;b+=16)tile=groundTilesGroup.create(b,SNES_HEIGHT-32,"groundTiles"),tile.frame=84,tile=groundTilesGroup.create(b,SNES_HEIGHT-16,"groundTiles"),tile.frame=109;bush=game.add.sprite(64,SNES_HEIGHT-48,"background-objects"),bush.frame=73,ledge=game.add.sprite(176,SNES_HEIGHT-128,"background-objects"),ledge.frame=23,ledge=game.add.sprite(180,SNES_HEIGHT-76,"background-objects"),ledge.frame=28,music=game.add.audio("Overworld Theme"),jumpSFX=game.add.audio("Jump Wav"),coinSFX=game.add.audio("Coin Wav"),spinSFX=game.add.audio("Spin Wav"),player=game.add.sprite(24,game.world.height-32,"mario"),game.physics.arcade.enable(player),player.body.bounce.y=0,player.body.gravity.y=1e3,player.body.collideWorldBounds=!0,player.direction="right",player.anchor.setTo(.5,1),player.body.width=13,player.animations.add("walk",[15,14],10,!0),player.animations.add("run",[15,14],16,!0),player.animations.add("spin",[20,21,14],20,!0),player.hitPlatform,player.jumptimeStart=-1,player.jumpType=0,coins=game.add.group(),coins.enableBody=!0,cursors=game.input.keyboard.createCursorKeys(),buttons={A:game.input.keyboard.addKey(Phaser.Keyboard.D),B:game.input.keyboard.addKey(Phaser.Keyboard.S),Y:game.input.keyboard.addKey(Phaser.Keyboard.A)},buttons.B.onDown.add(jump,this),buttons.A.onDown.add(spin,this),coin1HUD=game.add.sprite(200,15,"hud"),coin1HUD.frame=3,coin2HUD=game.add.sprite(209,16,"hud"),coin2HUD.frame=5}function update(){player.hitPlatform=game.physics.arcade.collide(player,platforms),player.jumpType=player.body.touching.down&&player.hitPlatform?0:player.jumpType,"right"===player.direction?player.scale.x=1:"left"===player.direction&&(player.scale.x=-1),buttons.B.isDown&&player.jumptimeStart!=-1&&(player.animations.play("spin"),game.time.time-player.jumptimeStart>175?player.jumptimeStart=-1:player.body.velocity.y=-250,player.animations.play("spin")),buttons.A.isDown&&player.jumptimeStart!=-1&&(game.time.time-player.jumptimeStart>200?player.jumptimeStart=-1:player.body.velocity.y=-200),!cursors.left.isDown||(cursors.up.isDown||cursors.down.isDown)&&player.body.touching.down&&player.hitPlatform?!cursors.right.isDown||(cursors.up.isDown||cursors.down.isDown)&&player.body.touching.down&&player.hitPlatform?2==player.jumpType?player.animations.play("spin"):(player.body.velocity.x=0,player.animations.stop(),player.frame=14):(player.body.velocity.x=buttons.Y.isDown?125:75,player.direction="right",2!=player.jumpType&&(buttons.Y.isDown?player.animations.play("run"):player.animations.play("walk"))):(player.body.velocity.x=buttons.Y.isDown?-125:-75,player.direction="left",2!=player.jumpType&&(buttons.Y.isDown?player.animations.play("run"):player.animations.play("walk"))),cursors.up.isDown&&player.body.touching.down&&player.hitPlatform&&(player.frame=9),cursors.down.isDown&&player.body.touching.down&&player.hitPlatform&&(player.frame=49),1===player.jumpType&&(player.body.velocity.y<0?player.frame=1:player.body.velocity.y>0&&(player.frame=3)),game.physics.arcade.collide(coins,platforms),game.physics.arcade.overlap(player,coins,collectCoin,null,this)}function spin(){player.jumpType=2,player.body.touching.down&&player.hitPlatform&&(player.jumptimeStart=game.time.time,player.body.velocity.y=-200,spinSFX.play(),player.animations.play("spin"))}function jump(){player.jumpType=1,player.body.touching.down&&player.hitPlatform&&(player.jumptimeStart=game.time.time,player.body.velocity.y=-250,jumpSFX.play())}function collectCoin(a,b){b.kill(),coinSFX.play(),score+=10}var SNES_WIDTH=256,SNES_HEIGHT=224,game=new Phaser.Game(SNES_WIDTH,SNES_HEIGHT,Phaser.AUTO,"",{preload:preload,create:create,update:update},!1,!1,null),score=0,scoreText;